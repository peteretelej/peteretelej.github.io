---
import type { CollectionEntry } from 'astro:content';
import Base from './Base.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Comments from '../components/Comments.astro';
import '../styles/notes.css';

interface Props {
	post: CollectionEntry<'notes'>;
	slug: string;
}

const { post, slug } = Astro.props;
const { title, publishDate, tags, excerpt } = post.data;
---

<Base title={title} description={excerpt || title}>
	<article class="max-w-6xl mx-auto px-6 py-12">
		<!-- Header -->
		<header class="mb-8">
			<nav class="text-sm text-gray-600 dark:text-gray-400 mb-4">
				<a href="/notes" class="hover:text-brand-600 dark:hover:text-brand-400 transition-colors">
					← Notes
				</a>
			</nav>
			
			<h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
				{title}
			</h1>
			
			{tags && tags.length > 0 && (
				<div class="flex gap-2">
					{tags.map(tag => (
						<span class="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-2 py-1 rounded-full text-xs">
							{tag}
						</span>
					))}
				</div>
			)}
		</header>

		<!-- Content -->
		<div class="prose prose-xl dark:prose-invert max-w-none notes-content">
			<slot />
		</div>

		<!-- Article metadata -->
		<div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
			<div class="flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
				<span>Published: <FormattedDate date={publishDate} /></span>
				<span>&middot;</span>
				<a
					href={`https://github.com/peteretelej/peteretelej.github.io/edit/main/src/content/notes/${slug}.mdx`}
					target="_blank"
					rel="noopener noreferrer"
					class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 transition-colors duration-200 flex items-center gap-1"
				>
					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
					</svg>
					Edit this page
				</a>
			</div>
		</div>

		<!-- Comments -->
		<Comments repo="peteretelej/peteretelej.github.io" />

		<!-- Footer navigation -->
		<footer class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-700">
			<a 
				href="/notes" 
				class="text-brand-600 dark:text-brand-400 hover:text-brand-700 dark:hover:text-brand-300 transition-colors"
			>
				← More notes
			</a>
		</footer>
	</article>
</Base>